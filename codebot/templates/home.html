{% extends 'base.html' %}

{% block content %}

{% if user.is_authenticated %}

  {% if response %}
    <pre>
      <code class='line-numbers language-{{lang}}'>
        {{response}}
      </code>
    </pre>

 <br/> <br/>
    <div class="container">
      <form method="POST" id="message-form" action="{% url 'home' %}">
        {% csrf_token %}
        <div class="mb-3">
          <textarea class="form-control" id="message" name="code" placeholder="Type or speak your message" rows="3">{{code}}</textarea>
        </div>
        <p id="transcription"></p>
        <select class="form-select" name="lang">
          <option selected>Select Programming Language</option>
          {% for lang in lang_list %}
            <option value="{{ lang }}">{{ lang }}</option>
          {% endfor %}
        </select>
        <select class="form-select" name="action" >
          <option selected>Select action</option>
          {% for action in action_list %}
            <option value="{{ action }}">{{ action }}</option>
          {% endfor %}
        </select>
        <br/>
        <button type="submit" class="btn btn-secondary" id="send">Send</button>
        <br/>
		  <button id="start" class="btn btn-secondary">Start Recording</button>
      <button id="stop" class="btn btn-secondary" disabled>Stop Recording</button>
      </form>





    </div>

{% else %}

    <pre>
      <code class='line-numbers language-python'>
        ### Let me help with your code
      </code>
      <
    </pre>
<div class="container">
      <form method="POST" id="message-form" action="{% url 'home' %}">
        {% csrf_token %}
        <div class="mb-3">
          <textarea class="form-control" id="message" name="code" placeholder="Type or speak your message" rows="3">{{code}}</textarea>
        </div>
        <p id="transcription"></p>
        <select class="form-select" name="lang">
          <option selected>Select Programming Language</option>
          {% for lang in lang_list %}
            <option value="{{ lang }}">{{ lang }}</option>
          {% endfor %}
        </select>
        <select class="form-select" name="action">
          <option selected>Select action</option>
          {% for action in action_list %}
            <option value="{{ action }}">{{ action }}</option>
          {% endfor %}
        </select>
        <br/>
        <button type="submit" class="btn btn-secondary" id="send">Send</button>
        <br/><br/>
		  <button id="start" class="btn btn-secondary">Start Recording</button>
      <button id="stop" class="btn btn-secondary" disabled>Stop Recording</button>
      </form>




    </div>


 {% endif %}




    <br/><br/><br/>


{% else %}

  <div class="col-md-6 offset-md-3">
    <h1>Login</h1>
    <br/>

    <form method="POST" action="{% url 'login' %}">
      {% csrf_token %}
      <div class="form-group">
        <input type="text" class="form-control" placeholder="Enter Username" name="username">
        <br/>
      </div>
      <div class="form-group">
        <input type="password" class="form-control" placeholder="Enter Password" name="password">
      </div>
      <br/>

      <button type="submit" class="btn btn-secondary">Login</button>
    </form>

  </div>
<script src="static/js/script.js"></script>
{% endif %}


{% endblock %}








